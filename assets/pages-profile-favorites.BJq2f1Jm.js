import{f as t,r as a,p as e,A as s,k as o,T as l,m as r,x as i,y as d,z as n,C as u,B as c,c as f,w as g,i as _,o as p,a as m,b as v,D as h,E as y,F as b,G as C,e as I,H as k,J as F,d as $}from"./index-9XL5VAeM.js";import{r as D,_ as P}from"./uni-app.es.CfXeMcxE.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=x({data:()=>({favoritePosts:[]}),onShow(){this.loadFavorites()},onPullDownRefresh(){this.loadFavorites(),setTimeout((()=>{t()}),1e3)},methods:{loadFavorites(){const t=a();if(!t)return void e({url:"/pages/login/login"});const l=s(`favorites_${t.id}`)||[],r=o();this.favoritePosts=r.filter((t=>l.includes(t.id)))},removeFavorite(t){const e=a();if(!e)return;let o=s(`favorites_${e.id}`)||[];const i=o.indexOf(t);i>-1&&(o.splice(i,1),l(`favorites_${e.id}`,o),this.loadFavorites(),r({title:"å·²ç§»é™¤",icon:"none"}))},goToDetail(t){e({url:`/pages/detail/detail?id=${t}`})},formatDate(t){if(!t)return"";const a=new Date(t);return`${a.getFullYear()}/${a.getMonth()+1}/${a.getDate()}`},getLevel:t=>i(t),getPoints:t=>d(t),getAvatar:t=>n(t),getCategoryName(t){if("circle"===t.categoryId)return`å¹æ°´å»£å ´ > ${t.subCategoryId}`;if(t.categoryId){const a=u.find((a=>a.id===t.categoryId));if(a){let e=a.name;if(t.subCategoryId&&a.children){const s=a.children.find((a=>a.id===t.subCategoryId));s&&(e+=` > ${s.name}`)}return e}}return""}}},[["render",function(t,a,e,s,o,l){const r=I,i=_,d=$,n=D(c("app-tab-bar"),P);return p(),f(i,{class:"container"},{default:g((()=>[m(i,{class:"notice-bar"},{default:g((()=>[m(i,{class:"notice-content"},{default:g((()=>[m(r,{class:"notice-text"},{default:g((()=>[v("ğŸ“¢ æœ¬ç‰ˆç‰ˆè¦ï¼šåš´ç¦ç™¼ä½ˆä»»ä½•è‰²æƒ…ã€æš´åŠ›ã€è³­åšåŠè©é¨™è¨Šæ¯ã€‚è«‹ä¿æŒç¦®è²Œï¼Œå°Šé‡ä»–äººã€‚é•è€…å°‡è¢«å°ç¦ã€‚")])),_:1})])),_:1})])),_:1}),m(i,{class:"header"},{default:g((()=>[m(r,null,{default:g((()=>[v("æˆ‘çš„æ”¶è—")])),_:1})])),_:1}),m(i,{class:"post-list"},{default:g((()=>[(p(!0),h(b,null,y(o.favoritePosts,((t,a)=>(p(),f(i,{key:a,class:"post-card",onClick:a=>l.goToDetail(t.id)},{default:g((()=>[m(i,{class:"post-header"},{default:g((()=>[m(i,{class:"author-row"},{default:g((()=>[m(d,{src:l.getAvatar(t.authorId)||"/static/logo.png",class:"post-small-avatar",mode:"aspectFill"},null,8,["src"]),m(r,{class:"post-author"},{default:g((()=>[v(k(t.authorName),1)])),_:2},1024),t.authorId?(p(),f(i,{key:0,class:"user-stats"},{default:g((()=>[m(r,{class:"stat-badge level"},{default:g((()=>[v("Lv."+k(l.getLevel(t.authorId)),1)])),_:2},1024),m(r,{class:"stat-badge points"},{default:g((()=>[v("ğŸ”¥"+k(l.getPoints(t.authorId)),1)])),_:2},1024)])),_:2},1024)):C("",!0)])),_:2},1024),m(r,{class:"post-time"},{default:g((()=>[v(k(l.formatDate(t.timestamp)),1)])),_:2},1024)])),_:2},1024),m(r,{class:"post-title"},{default:g((()=>[v(k(t.title),1)])),_:2},1024),l.getCategoryName(t)?(p(),f(i,{key:0,class:"category-tag"},{default:g((()=>[m(r,null,{default:g((()=>[v("#"+k(l.getCategoryName(t)),1)])),_:2},1024)])),_:2},1024)):C("",!0),m(i,{class:"remove-btn",onClick:F((a=>l.removeFavorite(t.id)),["stop"])},{default:g((()=>[m(r,null,{default:g((()=>[v("ç§»é™¤æ”¶è—")])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128)),0===o.favoritePosts.length?(p(),f(i,{key:0,class:"empty-state"},{default:g((()=>[m(r,null,{default:g((()=>[v("æš«ç„¡æ”¶è—å¸–å­")])),_:1})])),_:1})):C("",!0)])),_:1}),m(n)])),_:1})}],["__scopeId","data-v-3f2b166f"]]);export{w as default};

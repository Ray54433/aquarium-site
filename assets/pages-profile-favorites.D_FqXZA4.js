import{g as t,t as a,q as e,B as s,l as o,U as l,n as r,y as i,z as d,A as n,C as u,D as c,c as f,w as g,i as _,o as p,a as v,b as m,E as h,F as y,G as b,H as C,e as I,J as F,K as $,d as k}from"./index-CcRA1RUw.js";import{r as D,_ as P}from"./uni-app.es.2SZY3XeM.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=w({data:()=>({favoritePosts:[]}),onShow(){this.loadFavorites()},onPullDownRefresh(){this.loadFavorites(),setTimeout((()=>{t()}),1e3)},methods:{loadFavorites(){const t=a();if(!t)return void e({url:"/pages/login/login"});const l=s(`favorites_${t.id}`)||[],r=o();this.favoritePosts=r.filter((t=>l.includes(t.id)))},removeFavorite(t){const e=a();if(!e)return;let o=s(`favorites_${e.id}`)||[];const i=o.indexOf(t);i>-1&&(o.splice(i,1),l(`favorites_${e.id}`,o),this.loadFavorites(),r({title:"å·²ç§»é™¤",icon:"none"}))},goToDetail(t){e({url:`/pages/detail/detail?id=${t}`})},formatDate(t){if(!t)return"";const a=new Date(t);return`${a.getFullYear()}/${a.getMonth()+1}/${a.getDate()}`},getLevel:t=>i(t),getPoints:t=>d(t),getAvatar:t=>n(t),getCategoryName(t){if("circle"===t.categoryId)return`å¹æ°´å»£å ´ > ${t.subCategoryId}`;if(t.categoryId){const a=u.find((a=>a.id===t.categoryId));if(a){let e=a.name;if(t.subCategoryId&&a.children){const s=a.children.find((a=>a.id===t.subCategoryId));s&&(e+=` > ${s.name}`)}return e}}return""}}},[["render",function(t,a,e,s,o,l){const r=I,i=_,d=k,n=D(c("app-tab-bar"),P);return p(),f(i,{class:"container"},{default:g((()=>[v(i,{class:"notice-bar"},{default:g((()=>[v(i,{class:"notice-content"},{default:g((()=>[v(r,{class:"notice-text"},{default:g((()=>[m("ğŸ“¢ æœ¬ç‰ˆç‰ˆè¦ï¼šåš´ç¦ç™¼ä½ˆä»»ä½•è‰²æƒ…ã€æš´åŠ›ã€è³­åšåŠè©é¨™è¨Šæ¯ã€‚è«‹ä¿æŒç¦®è²Œï¼Œå°Šé‡ä»–äººã€‚é•è€…å°‡è¢«å°ç¦ã€‚")])),_:1})])),_:1})])),_:1}),v(i,{class:"header"},{default:g((()=>[v(r,null,{default:g((()=>[m("æˆ‘çš„æ”¶è—")])),_:1})])),_:1}),v(i,{class:"post-list"},{default:g((()=>[(p(!0),h(b,null,y(o.favoritePosts,((t,a)=>(p(),f(i,{key:a,class:"post-card",onClick:a=>l.goToDetail(t.id)},{default:g((()=>[v(i,{class:"post-header"},{default:g((()=>[v(i,{class:"author-row"},{default:g((()=>[v(d,{src:l.getAvatar(t.authorId)||"/static/logo.png",class:"post-small-avatar",mode:"aspectFill"},null,8,["src"]),v(r,{class:"post-author"},{default:g((()=>[m(F(t.authorName),1)])),_:2},1024),t.authorId?(p(),f(i,{key:0,class:"user-stats"},{default:g((()=>[v(r,{class:"stat-badge level"},{default:g((()=>[m("Lv."+F(l.getLevel(t.authorId)),1)])),_:2},1024),v(r,{class:"stat-badge points"},{default:g((()=>[m("ğŸ”¥"+F(l.getPoints(t.authorId)),1)])),_:2},1024)])),_:2},1024)):C("",!0)])),_:2},1024),v(r,{class:"post-time"},{default:g((()=>[m(F(l.formatDate(t.timestamp)),1)])),_:2},1024)])),_:2},1024),v(r,{class:"post-title"},{default:g((()=>[m(F(t.title),1)])),_:2},1024),l.getCategoryName(t)?(p(),f(i,{key:0,class:"category-tag"},{default:g((()=>[v(r,null,{default:g((()=>[m("#"+F(l.getCategoryName(t)),1)])),_:2},1024)])),_:2},1024)):C("",!0),v(i,{class:"remove-btn",onClick:$((a=>l.removeFavorite(t.id)),["stop"])},{default:g((()=>[v(r,null,{default:g((()=>[m("ç§»é™¤æ”¶è—")])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128)),0===o.favoritePosts.length?(p(),f(i,{key:0,class:"empty-state"},{default:g((()=>[v(r,null,{default:g((()=>[m("æš«ç„¡æ”¶è—å¸–å­")])),_:1})])),_:1})):C("",!0)])),_:1}),v(n)])),_:1})}],["__scopeId","data-v-3f2b166f"]]);export{x as default};

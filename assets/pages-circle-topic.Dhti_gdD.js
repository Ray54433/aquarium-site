import{Q as t,f as s,k as e,p as a,A as o,m as l,T as i,B as c,c as r,w as n,i as p,o as u,a as m,b as d,D as f,E as g,F as _,G as h,e as N,H as b,d as k}from"./index-1UdTh2kG.js";import{r as y,_ as P}from"./uni-app.es.D-AGfr41.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=T({data:()=>({topicName:"",posts:[]}),computed:{topicPosts(){return this.posts.filter((t=>"circle"===t.categoryId&&t.subCategoryId===this.topicName))}},onLoad(s){s.name&&(this.topicName=s.name,t({title:this.topicName}))},onShow(){this.loadPosts()},onPullDownRefresh(){this.loadPosts(),setTimeout((()=>{s()}),1e3)},methods:{loadPosts(){const t=e();this.posts=t.sort(((t,s)=>s.timestamp-t.timestamp))},goToDetail(t){a({url:`/pages/detail/detail?id=${t}`})},createTopicPost(){if(!o("currentUser"))return l({title:"è«‹å…ˆç™»å…¥",icon:"none"}),void setTimeout((()=>{a({url:"/pages/login/login"})}),1e3);i("preSelectCircleTopic",{topicName:this.topicName}),a({url:`/pages/create/create?mode=circle&topic=${this.topicName}`})},formatDate(t){if(!t)return"";const s=new Date(t);return isNaN(s.getTime())?"":`${s.getMonth()+1}/${s.getDate()} ${s.getHours()}:${s.getMinutes().toString().padStart(2,"0")}`}}},[["render",function(t,s,e,a,o,l){const i=N,T=p,D=k,C=y(c("app-tab-bar"),P);return u(),r(T,{class:"container"},{default:n((()=>[m(T,{class:"notice-bar-container"},{default:n((()=>[m(T,{class:"notice-bar"},{default:n((()=>[m(T,{class:"notice-content"},{default:n((()=>[m(i,{class:"notice-text"},{default:n((()=>[d("ðŸ“¢ æœ¬ç‰ˆç‰ˆè¦ï¼šåš´ç¦ç™¼ä½ˆä»»ä½•è‰²æƒ…ã€æš´åŠ›ã€è³­åšåŠè©é¨™è¨Šæ¯ã€‚è«‹ä¿æŒç¦®è²Œï¼Œå°Šé‡ä»–äººã€‚é•è€…å°‡è¢«å°ç¦ã€‚")])),_:1})])),_:1})])),_:1})])),_:1}),m(T,{class:"post-list"},{default:n((()=>[(u(!0),f(_,null,g(l.topicPosts,((t,s)=>(u(),r(T,{key:s,class:"post-card",onClick:s=>l.goToDetail(t.id)},{default:n((()=>[m(T,{class:"post-header"},{default:n((()=>[m(i,{class:"post-author"},{default:n((()=>[d(b(t.authorName),1)])),_:2},1024),m(i,{class:"post-time"},{default:n((()=>[d(b(l.formatDate(t.timestamp)),1)])),_:2},1024)])),_:2},1024),m(T,{class:"topic-badge"},{default:n((()=>[m(i,null,{default:n((()=>[d(b(o.topicName),1)])),_:1})])),_:1}),m(i,{class:"post-title"},{default:n((()=>[d(b(t.title),1)])),_:2},1024),m(i,{class:"post-summary"},{default:n((()=>[d(b(t.content.substring(0,50))+"...",1)])),_:2},1024),t.images&&t.images.length>0?(u(),r(T,{key:0,class:"image-preview-list"},{default:n((()=>[(u(!0),f(_,null,g(t.images.slice(0,3),((t,s)=>(u(),r(D,{key:s,src:t,mode:"aspectFill",class:"post-image-small"},null,8,["src"])))),128))])),_:2},1024)):t.image?(u(),r(D,{key:1,src:t.image,mode:"aspectFill",class:"post-image"},null,8,["src"])):h("",!0)])),_:2},1032,["onClick"])))),128)),0===l.topicPosts.length?(u(),r(T,{key:0,class:"empty-state"},{default:n((()=>[m(i,null,{default:n((()=>[d("æš«ç„¡å¸–å­")])),_:1})])),_:1})):h("",!0)])),_:1}),m(T,{class:"fab",onClick:l.createTopicPost},{default:n((()=>[m(i,{class:"fab-icon"},{default:n((()=>[d("+")])),_:1})])),_:1},8,["onClick"]),m(C)])),_:1})}],["__scopeId","data-v-079a542f"]]);export{D as default};
